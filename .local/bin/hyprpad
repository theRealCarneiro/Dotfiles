#!/bin/sh

# get current workspace
currwsp=$(hyprctl activewindow | grep workspace | sed -n 's/.*workspace: //; s/ (.*//gp')
if [ -z "$currwsp" ]; then 
	currwsp=$(hyprctl workspaces | grep -B 1 'windows: 0' | grep -B 1 'windows: 0' | sed -n 's/.*ID //g; s/ (.*//gp')
fi

# check if scratchpad is running
if hyprctl clients | grep Scratchpad; then

	# get scratchpad workspace
	padwsp=$(hyprctl clients | grep -A 3 "Window.*Scratchpad" | sed -n 's/.*workspace: //; s/ (.*//gp')

	# if on same workspace, hide it
	if [ $currwsp = $padwsp ]; then
		selwsp=special
	else
		selwsp=$currwsp
	fi

	hyprctl dispatch movetoworkspace $selwsp,scratchpad

# if there's no instance running
else
	alacritty --class scratchpad,scratchpad -t Scratchpad
fi
exit
